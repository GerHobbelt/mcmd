#===================================================
# CSVファイル診断 
# file name : ./indat/dat2.csv
#---------------------------------------------------
# 結果の一文字目の意味
# # : 情報行(問題なし)
# ? : KGMODにて扱えない問題点(?の後の文字は解説参照)
# よって、左端が全て#になればOK
#===================================================
############################ ヘッダー情報(1行目) ###
# 項目数 : 4
# 項目No.  項目名
# 1   顧客ID
# 2   商品ID
# 3   数量
# 4   数量
?a 同一項目名 : [2] 数量 , [3] 数量
#
############## EOL(End Of Line)情報(ヘッダー含む) ##
#         LF改行行数 : 13 (LineNo: 0 1 2 ... )
#
################# データ行情報(ヘッダー含まない) ###
#           総行数 : 12
#       総バイト数 : 128
#           平均長 : 10.6667
#           最大長 : 11 (LineNo:2)
#           最小長 : 7 (LineNo:6)
# 注:長さは、改行文字も含めた長さ
#
################################# 項目数の一貫性 ###
# 全てのレコードの項目数は4で同じでした。
#
####################################### 項目情報 ###
#  項目番号[1] 項目名[顧客ID]
#    NULL値の行数                : 0 
#    DQUOTEで囲われていない行数  : 12 (LineNo: 1 2 3 ... )
#    DQUOTEで囲われている行数    : 0 
#
#  項目番号[2] 項目名[商品ID]
#    NULL値の行数                : 1 (LineNo: 5 )
#    DQUOTEで囲われていない行数  : 12 (LineNo: 1 2 3 ... )
#    DQUOTEで囲われている行数    : 0 
#
#  項目番号[3] 項目名[数量]
#    NULL値の行数                : 0 
#    DQUOTEで囲われていない行数  : 12 (LineNo: 1 2 3 ... )
#    DQUOTEで囲われている行数    : 0 
#
#  項目番号[4] 項目名[数量]
#    NULL値の行数                : 0 
#    DQUOTEで囲われていない行数  : 12 (LineNo: 1 2 3 ... )
#    DQUOTEで囲われている行数    : 0 
#
################################### 問題点の解説 ###
# ?a : 同じ項目名があると項目番号を特定できない。
#  【対処方法】kgchkcsv a=x,y,z のように項目名を新たに指定する。
# ?b : 項目名に不正な文字があるとエラーになる
#  【対処方法】kgchkcsv a=x,y,z のように項目名を新たに指定する。
# ?c : KGMODが扱う改行は高速化のためLF(UNIX改行)のみ。
#      この問題はRFC4180には準拠しておらずKGMOD独自の制約である。
#  【対処方法】kgchkcsv にて全てLFに変換される。
#
# ?d : 最終行にLFやCRなどの改行(EOL)文字が存在しない。
#      これはRFC4180にも準拠していない。
#  【対処方法】kgchkcsv にてLFが付加される。
#
# ?e : データファイル内に'\0'が入り込んでいる。
#      テキストファイルでない可能性が高い。
#      RFC4180には準拠していない。
#  【対処方法】kgchkcsv にて、"&#x00;"に変換される。
#              kgchkcsv -rにて\0は削除される。
#
# ?f : KGMODが扱える一行の最大長を超過している。
#      現在の設定では1024000バイト以上の長さの行は扱えない。
#  【対処方法】環境変数を設定することで最大値を変更可能である。
#        ex) export KG_MaxRecLen=204800
#      ただし10240000バイトを越えては指定できない。 
#      この問題はRFC4180には準拠しておりKGMOD独自の制約である。
#
# ?g : KGMODでは全行同じ項目数を前提とする。
#      この問題はRFC4180には準拠しておりKGMOD独自の制約である。
#  【対処方法】
#       1) kgchkcsv  データHEADERの項目数に合わせる.
#            超過項目は捨てられ、足りない項目はnull値となる
#       2) kgchkcsv  a=x,y,z HEADER行をスキップし、
#            指定したx,y,zを項目名として1)と同様の処理を行う。
#
# ?h : 制御文字(0x01~0x1F,0x7F)が項目値として入り込んでいる。
#      テキストファイルでない可能性が高い。
#      RFC4180には準拠していない。
#  【対処方法】kgchkcsv にて、"&#x01;"の様にテキストコードに変換される。
#              kgchkcsv -rにて制御文字は削除される。
#
# ?i : TABは利用できない。
#      RFC4180には準拠していない。
#  【対処方法】kgchksv にて、"&#x09;"に変換される。
#              kgchkcsv -rにてTABは削除される。
#
# ?j : DQUOTEで囲われていない中でDQUOTEが見つかった
#        ex) NG: xxx,oo"oo,xxx  -> OK: xxx,"oo""oo",xxx
#      RFC4180には準拠していない。
#  【対処方法】kgchkcsv にて上記の変換を行う。
#
# ?k : DQUOTEで囲われている中で単一のDQUOTEが見つかった
#      ex) NG: xxx,"oo"oo",xxx  -> OK: xxx,"oo""oo",xxx
#      RFC4180には準拠していない。
#  【対処方法】kgchkcsvにて上記の変換を行う。
#-------------------------------------------------------------
